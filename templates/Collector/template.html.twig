{% extends '@WebProfiler/Profiler/layout.html.twig' %}

{% block toolbar %}
    {% set icon %}
        {# this is the content displayed as a panel in the toolbar #}

        <a class="sf-toggle btn btn-sm" data-toggle-selector="#sidebar-watchdog" {% if tokens is defined or about is defined %}data-toggle-initial="display"{% endif %}>
            {{ include('@Watchdog/Collector/icon.svg') }}
        </a>
        <span class="sf-toolbar-value">Watchdog</span>
    {% endset %}

    {% set text %}
        {# this is the content displayed when hovering the mouse over
           the toolbar panel #}
        <div class="sf-toolbar-info-piece">
            <table>
            {% for watchdogId, watchdog in collector.watchdogs %}
                <tr>
                {% for matchingUnit in watchdog.matchingUnits %}
                    {% if 'compound' != matchingUnit.type %}
                    <td>{{ matchingUnit }}</td>
                    {% endif %}
                {% endfor %}
                </tr>
            {% endfor %}
            </table>
        </div>
    {% endset %}

    {# the 'link' value set to 'false' means that this panel doesn't
       show a section in the web profiler #}
    {{ include('@WebProfiler/Profiler/toolbar_item.html.twig', {
        link : true,
    }) }}
{% endblock %}

{% block menu %}
    {# This left-hand menu appears when using the full-screen profiler. #}
    <span class="label">
        <span class="icon">
             {{ include('@Watchdog/Collector/icon.svg') }} <span class="hidden-small"></span>
        </span>
        <strong>Watchdog</strong>
    </span>
{% endblock %}

{% block panel %}
    {# Optional, for showing the most details. #}
    <h2>Watchdog</h2>
        {% for watchdogId, watchdog in collector.watchdogs %}
            <b>{{ watchdogId }}</b>
            <table>
                {% for unit in watchdog.units %}
                <tr>
                    <td>{{ unit.type }}</td>
                    <td>{{ unit.originalConfig }}</td>
                    <td>{{ 'compound' != unit.type ? unit }}</td>
                    <td>{{ unit.isMatching }}</td>
                </tr>
                {% endfor %}
            </table>
        {% endfor %}
{% endblock %}
